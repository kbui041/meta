{% extends "bookings/home.html" %}

{% block title %}{{ hotel.name }} - Hotel Booking System{% endblock %}

{% block content %}
    <h1 class="display-4">{{ hotel.name }}</h1>
    <p class="lead">{{ hotel.description }}</p>

    <div class="mt-5">
        <h2>Reviews</h2>
        {% for review in reviews %}
            <div class="review">
                <p><strong>{{ review.customer.user.username }}</strong>: {{ review.comment }}</p>
            </div>
        {% endfor %}
        <a href="{% url 'add_review' hotel.id %}" class="btn btn-primary mt-3">Add Review</a>
    </div>

    <div class="mt-5">
        <h2>Make a Reservation</h2>
        <form id="reservationForm" method="post">
            {% csrf_token %}
            <div class="form-group">
                <label for="room">Room:</label>
                <select class="form-control" id="room" name="room" required>
                    {% for room in rooms %}
                        <option value="{{ room.id }}">{{ room.name }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                <label for="check_in">Check in:</label>
                <input type="date" class="form-control" id="check_in" name="check_in" required>
            </div>
            <div class="form-group">
                <label for="check_out">Check out:</label>
                <input type="date" class="form-control" id="check_out" name="check_out" required>
            </div>
            <button type="submit" class="btn btn-primary" id="submitButton">Submit</button>
        </form>
        <p id="confirmationMessage" class="mt-3"></p>
    </div>
{% endblock %}

{% block scripts %}
<script>
    document.getElementById('reservationForm').addEventListener('submit', function(event) {
        let room = document.getElementById('room').value;
        let checkIn = document.getElementById('check_in').value;
        let checkOut = document.getElementById('check_out').value;
        if (!room || !checkIn || !checkOut) {
            event.preventDefault();
            document.getElementById('confirmationMessage').textContent = 'Please fill out all fields.';
            document.getElementById('confirmationMessage').style.color = 'red';
        }
    });
</script>
{% endblock %}
